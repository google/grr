<div *ngIf="resultTable$ | async as tableToDisplay; else noResultTable">
  <osquery-results-table
    [tableToDisplay]="tableToDisplay">
  </osquery-results-table>
</div>

<ng-template #noResultTable>
  <div *ngIf="progressTable$ | async as tableToDisplay; else noTable">
    <osquery-results-table
      [tableToDisplay]="tableToDisplay">
    </osquery-results-table>

    <div *ngIf="additionalRowsAvailable$ | async as additionalRowsAvailable">
      {{additionalRowsAvailable}} rows are hidden.
      <button (click)="fullTableRequested()">Get full table</button>
    </div>
  </div>
</ng-template>

<ng-template #noTable>
  <div *ngIf="flowRunning$ | async" class="in-progress">
    Query in progress: {{ (args$ | async).query }}
  </div>
</ng-template>

<!-- TODO: Remove the thing below if you don't need it -->
<div *ngIf="flowCompleted$ | async" class='results'>
</div>

<div *ngIf="flowError$ | async" class="error">
  An error was encountered.
  <div *ngIf="resultStderr$ | async as resultStderr">
    stderr is: {{resultStderr}}
  </div>
</div>
