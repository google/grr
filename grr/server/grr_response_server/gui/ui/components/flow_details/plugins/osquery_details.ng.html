<div *ngIf="flowError$ | async; else noError" class="error">
  An error was encountered.
  <div *ngIf="resultsStderr$ | async as resultsStderr">
    stderr is: {{resultsStderr}}
  </div>
</div>

<ng-template #noError>
  <div *ngIf="flowRunning$ | async" class="in-progress">
    Query in progress: {{ (args$ | async).query }}
  </div>

  <div *ngIf="resultsTable$ | async as resultsTable; else noResultsTable" class="results-table">
    <osquery-results-table
      [tableToDisplay]="resultsTable">
    </osquery-results-table>
  </div>

  <ng-template #noResultsTable>
    <div *ngIf="progressTable$ | async as progressTable" class="progress-table">
      <div *ngIf="additionalRowsAvailable$ | async as additionalRowsAvailable" class="show-additional">
        <span class="show-additional-text">{{additionalRowsAvailable}} row(s) hidden.</span>
        <button (click)="fullTableRequested()">Display the full table</button>
      </div>

      <osquery-results-table
        [tableToDisplay]="progressTable">
      </osquery-results-table>
    </div>
  </ng-template>
</ng-template>
